# Медицинская информационная система

[![PHP](https://img.shields.io/badge/PHP-7.4+-blue.svg)](https://php.net)
[![Yii2](https://img.shields.io/badge/Yii2-2.0+-green.svg)](https://www.yiiframework.com/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0+-orange.svg)](https://mysql.com)

**Веб-приложение для автоматизации процессов медицинского учреждения** — управление пациентами, врачами, услугами и направлениями.

---

## Возможности системы

### Управление данными
- **Пациенты** — ведение базы пациентов с полной демографической информацией
- **Врачи** — учет медицинского персонала и их должностей
- **Услуги** — каталог медицинских услуг с ценами
- **Направления** — формирование направлений на медицинские услуги

### Безопасность
- **Авторизация** — система регистрации и аутентификации
- **Ролевая модель** — разграничение прав доступа
- **Soft Delete** — мягкое удаление записей без потери данных

### Интерфейс
- **CRUD операции** — создание, чтение, обновление, удаление
- **Поиск и фильтрация** — быстрый поиск по всем сущностям
- **Пагинация** — удобная навигация по большим объёмам данных

---

## Архитектура

MVC Pattern (Yii2 Framework)

├── Models (Сущности и бизнес-логика)  
├── Views (Представления — Twig шаблоны)  
├── Controllers (Обработка запросов)  
└── Database (Миграции и связи)

---

## Технологический стек

- **Backend:** PHP 7.4+, Yii2 Framework  
- **Database:** MySQL 8.0+  
- **Templates:** Twig  
- **Auth:** Yii2 RBAC  
- **Migrations:** Yii2 Migration System

---

## Установка и запуск

### Предварительные требования

    PHP 7.4+
    Composer
    MySQL 8.0+

### Установка зависимостей

    composer install

### Настройка базы данных

1. Создайте базу данных MySQL.  
2. Настройте подключение в `config/db.php`.  
3. Примените миграции:

    php yii migrate

### Запуск приложения

    php yii serve

Приложение будет доступно по адресу: http://localhost:8080

---

## Структура базы данных

**Основные таблицы:**
- `patients` — пациенты (ФИО, пол, дата рождения, контакты)
- `doctors` — врачи (ФИО, должность)
- `services` — медицинские услуги (название, стоимость)
- `direction_list` — направления (пациент, врач, дата)
- `direction_list_services` — связь направлений и услуг
- `admins` — администраторы системы

**Ключевые связи:**
- Направление → Пациент (Many-to-One)
- Направление → Врач (Many-to-One)
- Направление → Услуги (Many-to-Many)

---

## Основные endpoints

| Метод | URL | Описание |
|-------|-----|----------|
| GET   | /page/services | Список услуг |
| GET   | /page/patients | Список пациентов |
| GET   | /page/doctors  | Список врачей |
| GET   | /page/directions | Список направлений |
| POST  | /page/create/{type} | Создание сущности |
| POST  | /page/update/{type}/{id} | Обновление сущности |
| POST  | /page/delete/{type}/{id} | Удаление сущности |

---

## Безопасность

- **Валидация данных** — на уровне моделей Yii2  
- **SQL-инъекции** — защита через ActiveRecord  
- **XSS** — экранирование в шаблонах  
- **CSRF** — встроенная защита Yii2

---

## Миграции

Система использует миграции Yii2 для управления структурой БД:

    # Создание новой миграции
    php yii migrate/create create_new_table

    # Применение миграций
    php yii migrate

    # Откат миграций
    php yii migrate/down

---

## Разработка

**Структура проекта:**

controllers/     - Контроллеры  
models/          - Модели и формы  
views/           - Представления  
migrations/      - Миграции БД  
config/          - Конфигурации

**Code Style:**
- PSR-12 стандарт кодирования  
- Yii2 code style guidelines  
- Документирование с использованием PHPDoc

---

**Разработано в рамках учебной стажировки** — демонстрирует навыки full-stack разработки на PHP/Yii2.
